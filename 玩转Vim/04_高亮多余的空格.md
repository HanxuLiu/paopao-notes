# 高亮多余的空格

## 背景

日常开发中，通过vim编写代码时不经意间会出现一些不规范操作：

- 在行尾多了空格
- 空行里插入了空格
- 制表符和空格参杂混用

通常情况下，这些多余的空格不会显示，如果直接使用git提交代码，那么git show查看历史提交时，就会看到红色高亮的多余空格，显得提交的代码很不规范。

![image-20230919145714178](https://cdn.jsdelivr.net/gh/HanxuLiu/CDN1/img/2023/202309191457456.png)

对此，可以通过结合vim的匹配和高亮功能，在编辑代码时，就让这些多余的空格就高亮显示出来。

## vim配置

把下面配置添加到`~/.vimrc`里：

```
highlight ExtraWhitespace ctermbg=red guibg=red
autocmd BufWinEnter * match ExtraWhitespace /\s\+$\| \+\ze\t\+\|\t\+\zs \+/
```

表示制定一个高亮`highlight`配色方案`ExtraWhitespace`，会将行尾空白符和制表空格混排中的空格都高亮为红色。效果图如下：

![image-20230919164429725](https://cdn.jsdelivr.net/gh/HanxuLiu/CDN1/img/2023/202309191644790.png)

## 配置详细介绍

> `autocmd`：自动命令，在指定事件发生时自动执行的命令。  
> `BufWinEnter`：这是其中的一个事件，该事件在窗口中显示缓冲区之后进行触发。  
> `*`：表示所有文件类型。


> `\s`：表示匹配一个空白字符（空格或Tab）  
> `\+`：表示匹配一个或连续多个字符，例如`a\+` 表示匹配 "a", "aa", "aaaaa"   
> `\s\+`：组合起来表示匹配一个或连续多个空白字符。  

> `\s\+$`：用于匹配行尾空白符  
> `^\s\+`：用于匹配行首空白符 

> `\zs`：指明匹配由此开始  
> `\ze`：指明匹配到此为止

> ` \+\ze\t\+`：匹配紧跟制表符前的空格  
> `\t\+\zs \+`：匹配紧跟制表符后的空格

